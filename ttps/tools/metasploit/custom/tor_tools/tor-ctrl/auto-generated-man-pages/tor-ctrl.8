.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "TOR-CTRL" "8" "2022-01-24" "tor-ctrl 5.0.0" "Tor System Manager's Manual"
.hy
.SH NAME
.PP
tor-ctrl - Interact with Tor\[aq]s controller via command line tool
.SH SYNOPSIS
.PP
\f[B]tor-ctrl\f[R] [\f[B]-qVw\f[R]] [\f[B]-p\f[R] \f[I]pwd\f[R]]
[\f[B]-s\f[R] \f[I]socket\f[R]] [\f[B]-t\f[R] \f[I]time\f[R]]
[[\f[B]-c\f[R]|\f[B]--\f[R]] \f[I]command\f[R]]
.SH DESCRIPTION
.PP
\f[B]tor-ctrl\f[R] is a command line tool for setting up stream for
communication from the Tor Controller\[aq]s (client) to a Tor process
(server).
The client send commands using TCP sockets or Unix-domain sockets and
receive replies from the server.
The following configuration lines must be inserted to your torrc and tor
reloaded to apply the changes.
.PP
In order to get this to work, define the socket that will control the
tor process, can be a TCP socket \f[I]ControlPort 9051\f[R] or a
Unix-domain socket \f[I]ControlSocket /path/to/socket\f[R].
.PP
To secure the controller, you must setup and authentication method,
which can be a cookie \f[I]CookieAuthentication 1\f[R] or if you want a
fixed password, hash a password with command below and use the same
output given as the configuration line (change \f[C]YOUR_PASSOWRD\f[R],
but maintain it double quoted):
.IP
.nf
\f[C]
echo \[dq]HashedControlPassword $(tor --hash-password \[dq]YOUR_PASSWORD\[dq])\[dq]
\f[R]
.fi
.SH OPTIONS
.TP
[\f[B]-c\f[R]|\f[B]--\f[R]] [\f[I]command\f[R]]
command to execute.
If the command option is \f[I]-c\f[R], you must \[dq]quote\[dq] your
command.
If the command option is \f[I]--\f[R], option parsing will stop, meaning
that any option specified after it won\[aq]t be parsed, the benefit is
that it becomes unnecessary to quote your command.
To use different commands together, you must make shell escape to a new
line with \f[I]\[rs]\[rs]n\f[R].
.TP
\f[B]-s\f[R] \f[I]socket\f[R]
Tor\[aq]s control socket.
Accept \f[I]TCP socket\f[R] in the format
[\f[I]addr:\f[R]]\f[I]port\f[R] (examples: 9051, 127.0.0.1:9051).
Accept \f[I]Unix-domain socket\f[R] in the following format
[\f[I]unix:\f[R]]\f[I]path\f[R] (examples: /run/tor/control,
unix:/run/tor/control).
(Default: 9051).
.TP
\f[B]-p\f[R] \f[I]pwd\f[R]
Use password instead of tor\[aq]s cookie.
(Default: not used).
.TP
\f[B]-t\f[R] \f[I]time\f[R]
Sleep N seconds after each command sent.
(Default for socat/nc: 0 second, Default for telnet: 1 second).
.TP
\f[B]-w\f[R]
After sending the command, wait for interrupt signal, normally Ctrl+C,
before closing the connection.
Useful when you want to be warned about events (asynchronous replies),
example is when the command is \f[I]SETEVENTS STREAM\f[R].
The exit code shall not be evaluated.
(Default: not set)
.TP
\f[B]-q\f[R]
Quiet mode.
(Default: not set).
.TP
\f[B]-V\f[R]
Print version information and exit.
.SH DEBUGGING OPTIONS
.TP
\f[B]-d\f[R]
Debug mode.
The shell shall write to standard error a trace for each command after
it expands the command and before it executes it.
(Default: not set).
.TP
\f[B]-r\f[R]
Dry-run mode.
Show what would be done, without sending commands to the controller.
(Default: not set).
.SH EXIT CODES
.TP
\f[B]0\f[R]
Success.
.TP
\f[B]>0\f[R]
Fail.
.SH EXAMPLES
.PP
Check your tor software version:
.IP
.nf
\f[C]
tor-ctrl GETINFO version
\f[R]
.fi
.PP
Get your SocksPort configuration and check where tor is listening for
socks connections:
.IP
.nf
\f[C]
tor-ctrl -s 9051 -p foobar -- GETCONF SocksPort \[rs]\[rs]n GETINFO net/listeners/socks
\f[R]
.fi
.PP
Set bandwidth rate:
.IP
.nf
\f[C]
tor-ctrl -q SETCONF bandwidthrate=1mb
\f[R]
.fi
.PP
For setting the bandwidth for specific times of the day, I suggest
calling tor-ctrl via cron.
e.g: set the bandwidth to 100kb at 07:00 and to 1mb at 22:00.
You can use notations like 1mb, 1kb or the number of bytes:
.IP
.nf
\f[C]
0 22 * * * /path/to/tor-ctrl -c \[dq]SETCONF bandwidthrate=1mb\[dq]

0 7 * * *  /path/to/tor-ctrl -c \[dq]SETCONF bandwidthrate=100kb\[dq]
\f[R]
.fi
.SH WWW
.PP
https://gitweb.torproject.org/torspec.git/tree/control-spec.txt
.SH DISCLAIMER
.PP
This package is produced independently of, and carries no guarantee
from, The Tor Project.
.SH SEE ALSO
.PP
tor(1)
.SH BUGS
.PP
Not expected, please report them at
https://github.com/nyxnor/tor-ctrl/issues
.SH LICENSE
.PP
Copyright (C) 2007 by Stefan Behte
.PP
Portion Copyright (C) 2013 - 2025 ENCRYPTED SUPPORT LLC
<adrelanos@riseup.net>
.PP
Portion Copyright (C) 2021 - 2022 nyxnor <nyxnor@protonmail.com>
.PP
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the
Free Software Foundation, either version 3 of the License, or (at your
option) any later version.
.PP
This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
See the GNU General Public License for more details.
.PP
You should have received a copy of the GNU General Public License along
with this program.
If not, see <https://www.gnu.org/licenses/>.
.PP
On Debian systems, the full text of the GNU General Public License
version 3 can be found in the file
\[ga]/usr/share/common-licenses/GPL-3\[aq].
.SH AUTHORS
tor-ctrl was written by Stefan Behte (stefan.behte\[at]gmx.net), later
developed by and Patrick Schleizer (adrelanos\[at]riseup.net) and
further improved by nyxnor (nyxnor\[at]protonmail.com).
